<!DOCTYPE html>

<html lang="es">
  <head>
    <!-- M. Kevin Ayala Aguilera -->
    <meta charset="utf-8" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Preparador de cargas - MailHelper</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script
      type="text/javascript"
      src="./js/precarga.js"
      charset="utf-8"
    ></script>
    <link rel="stylesheet" href="./css/app.css" />
    <link rel="icon" href="./img/icon.png" />
    <style type="text/css">
      input[type="button"] {
        font-size: x-large;
        margin-top: 1em;
        width: 30%;
      }
      img {
        margin-top: 1px;
      }
    </style>
  </head>

  <body>
    <div id="menu">
      <h2 style="margin-top: 0; margin-bottom: 0">
        En Desarrollo - Mail Helper
      </h2>
      <input
        type="image"
        style="filter: grayscale(0%)"
        src="./img/barrier.png"
        value="Filtros Rápidos"
        title="Filtros Rápidos"
        onclick=""
      />
    </div>

    <div
      class="configurador"
      style="
        display: flex;
        flex-direction: column;
        margin-top: 100px;
        align-items: center;
        padding: 0;
      "
    >
      <input
        type="email"
        id="destinatario"
        name="destinatario"
        placeholder=" Destinatario: por ejemplo paco@gmail.com, 999sac@conforama.es"
        style="font-size: x-large; margin-top: 1em; height: 100%; width: 60%"
      />
      <input
        type="email"
        id="referencia"
        name="referencia"
        placeholder=" Referencia por ejemplo EPVT123456, SAV202503070000001, etc"
        style="font-size: x-large; margin-top: 1em; height: 100%; width: 60%"
      />

      <input
        type="button"
        value="Diferido disponible"
        href="#"
        onclick="enviarComunic(1)"
      />
      <img src="./img/diferido.png">
      <input
        type="button"
        value="Transporte disponible"
        href="#"
        onclick="enviarComunic(2)"
      />
      <img src="./img/transporte.png">
      <input
        type="button"
        value="En ruta"
        href="#"
        onclick="enviarComunic(3)"
      />
      <img src="./img/transporteya.png">
      <input
        type="button"
        value="SAV disponible"
        href="#"
        onclick="enviarComunic(4)"
      />
      <img src="./img/sav.png">
      <input
        type="button"
        value="Resto de pago pendiente"
        href="#"
        onclick="enviarComunic(5)"
      />
      <img src="./img/pay.png">
      <br />
    </div>

    <script>
      var configData = { almacenes: [], checkboxes: {} };
      document.addEventListener("DOMContentLoaded", function () {
        // Función para leer datos desde un archivo JSON
        try {
          const data = fs.readFileSync(finalConfigPath, "utf8");
          configData = JSON.parse(data); // Devuelve los datos como objeto
        } catch (err) {
          console.error("Error al leer el archivo de configuración:", err);
        }
      });

      let para = "";
      let asunto = "";
      let cuerpo = "";
      let cc = "";

      function enviarComunic(expr) {
        let ref = document.getElementById("referencia").value;
        if (ref == null || ref == undefined) ref = "";

        switch (expr) {
          case 1:
            asunto = "Conforama - Pedido/s " + ref + " disponible";
            cuerpo =
              "Hola,\n%0D%0A\nhemos intentado contactar con usted para informarle que su pedido o unos de sus pedidos se encuentra disponible para recoger.\n%0D%0A\nNuestro horario de recogida es de 11:00 a 19:30 de Lunes a Sábado.\n%0D%0A\nMuchas gracias.\n%0D%0A\n";
            break;
          case 2:
            asunto = "Conforama - Pedido/s " + ref + " para entrega disponible";
            cuerpo =
              "Hola,\n%0D%0A\nhemos intentado contactar con usted para informarle que su pedido o unos de sus pedidos se encuentra disponible para enviar.\n%0D%0A\nNecesitamos contactar con usted por teléfono para acordar fecha de entrega.\n%0D%0A\nMuchas gracias.\n%0D%0A\n";
            break;
          case 3:
            asunto = "Conforama - Pedido/s " + ref + " en ruta";
            cuerpo =
              "Hola,\n%0D%0A\nhemos intentado contactar con usted para informarle que su pedido o unos de sus pedidos se encuentra todavía en ruta hoy.\n%0D%0A\nGracias y un saludo.\n%0D%0A\n";
            break;
          case 4:
            asunto =
              "Conforama - SAV " +
              ref +
              " (recambio/repuesto/piezas) disponibles";
            cuerpo =
              "Hola,\n%0D%0A\nhemos intentado contactar con usted para informarle que su pedido de postventa " +
              ref +
              " se encuentra disponible.\n%0D%0A\nNuestro horario de postventa es de 11:00 a 19:30 de Lunes a Sábado.\n%0D%0A\n";
            break;
          case 5:
            asunto = "Conforama - " + ref + " Resto de pago pendiente";
            cuerpo =
              "Hola,\n%0D%0A\nhemos intentado contactar con usted para informarle que su pedido " +
              ref +
              " se encuentra disponible.\n%0D%0A\nTiene un resto de pago pendiente. Puede pagar mediante transferencia bancaria (ES20 2100 8630 4002 0004 7521), en tienda o con tarjeta desde su domicilio, para lo cual necesitamos que se ponga en contacto telefónico con nosotros.\n%0D%0A\nQuedamos a su disposición.\n%0D%0A\nGracias y un saludo.";
            break;
        }

        sendEmail();
      }

      function sendEmail() {
        para = document.getElementById("destinatario").value;
        asunto = asunto;
        cuerpo = cuerpo;

        window.location =
          "mailto:" + para + "?subject=" + asunto + "&body=" + cuerpo;
      }
    </script>
  </body>
</html>
